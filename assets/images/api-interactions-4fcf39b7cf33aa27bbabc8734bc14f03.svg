<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1456px" height="800px" viewBox="-0.5 -0.5 1456 800"><defs/><g><rect x="0" y="30" width="405" height="710" rx="60.75" ry="60.75" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 399px; height: 1px; padding-top: 37px; margin-left: 5px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><b><font color="#5912ff">OSim Manager<br />APP</font></b><br /><br /><div style="text-align: left;"><i>Available Information before call : </i></div><div style="text-align: left;"><span style="background-color: initial;"><b>myBPNS</b> = "A"</span></div><div style="text-align: left;"><span style="background-color: initial;"><b>BPNS of my partner</b> = "B"</span></div><div style="text-align: left;"><span style="background-color: initial;"><b>LastReceivedSimResultID from "B"</b> = "123"</span></div><div style="text-align: left;"><span style="background-color: initial;"><br /></span></div><div style="text-align: left;"><span style="background-color: initial;"><br /></span></div><div style="text-align: left;"><span style="background-color: initial;"><u>Steps:</u></span></div><div style="text-align: left;">1. Call requestLatestSimulationResult<span style="background-color: initial;">(</span></div><div style="text-align: left;"><span style="background-color: initial;">         BPNS of "A",</span></div><div style="text-align: left;"><span style="background-color: initial;">         ID of the last Simulation Result from "B",</span></div><div style="text-align: left;"><span style="background-color: initial;">         )</span></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><br /></div><div style="text-align: left;">2. Receive Return Value</div><div style="text-align: left;">2.1 </div><span style=""><div style="text-align: left;"><span style="background-color: initial;">IF retval = </span><span style="background-color: initial;">NoNewerSimulationAvailable </span><span style="background-color: initial;">THEN </span></div><div style="text-align: left;"><span style="background-color: initial;"><span style="white-space: pre;"> </span>do nothing</span></div></span><div style="text-align: left;">ELSEIF retval &lt;&gt; OK</div><div style="text-align: left;"><span style=""> </span><span style="white-space: pre;"> </span>Delete/Archive last received simulation result               <span style=""> </span>from "B"<br /></div><div style="text-align: left;">END IF</div><div style="text-align: left;"><br /></div><div style="text-align: left;"><br /></div><div style="text-align: left;">3. Persist the received simulation result </div><span style=""><div style="text-align: left;"><br /></div><div style="text-align: left;"><br /></div></span><div style="text-align: left;"><br /></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><span style="background-color: initial;">4. Return OK/NOK</span></div><div style="text-align: left;"><br /></div></div></div></div></foreignObject><text x="205" y="51" fill="#333333" font-family="Helvetica" font-size="14px" text-anchor="middle">OSim Manager...</text></switch></g><rect x="485" y="80" width="340" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 338px; height: 1px; padding-top: 95px; margin-left: 486px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="text-align: left;"><span style="background-color: initial;">requestLatestSimulationResult(</span></div><div style="text-align: left;"><span style="background-color: initial;"><span style="white-space: pre;"> </span>BPNS of "A",<br /></span></div><div style="text-align: left;"><span style="background-color: initial;"><span style="white-space: pre;"> </span>ID of the last Simulation Result from "B",</span></div><div style="text-align: left;"><span style="background-color: initial;"><span style="white-space: pre;"> </span>RequestID generated by "A" for this request-call)</span></div><div style="text-align: left;"></div><div style="text-align: left;"><span style="background-color: initial;"><br /></span></div><div style="text-align: left;"></div></div></div></div></foreignObject><text x="655" y="99" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">requestLatestSimulationResult(...</text></switch></g><path d="M 405 120 L 898.63 120" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 903.88 120 L 896.88 123.5 L 898.63 120 L 896.88 116.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="925" y="30" width="530" height="710" rx="79.5" ry="79.5" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 523px; height: 1px; padding-top: 37px; margin-left: 931px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><b><font color="#5912ff">OSim Manager<br />APP</font></b><br /><br /><div style="text-align: left;"><i>Available Information receiving the request call : </i></div><div style="text-align: left;"><span style="background-color: initial;"><b>myBPNS</b> = "B"</span></div><div style="text-align: left;"><span style="background-color: initial;"><b>BPNS of my partner</b> = "A"</span></div><div style="text-align: left;"><span style="background-color: initial;"><b>myLastSimResultID </b>= "789"</span></div><div style="text-align: left;"><span style="background-color: initial;">RequestID = GUID generated by "A"</span></div><div style="text-align: left;"><span style="background-color: initial;"><br /></span></div><div style="text-align: left;"><span style="background-color: initial;">Steps to provide simResults to "A" :</span></div><div style="text-align: left;"><span style="background-color: initial;"><br /></span></div><div style="text-align: left;">2.1. Check, if "A" is my partner in the OSim network configuration <span style="background-color: initial;"><br /></span></div><div style="text-align: left;"><span style="white-space: pre;"> </span>IF FALSE <b>Return "UnknownBPNS"</b><br /></div><div style="text-align: left;"><span style="background-color: initial;"><br /></span></div><div style="text-align: left;"><span style="background-color: initial;">2.2. Execute Querry :</span></div><div style="text-align: left;"><span style="background-color: initial;"><span style=""> </span>SELECT * FROM SimResult WHERE</span></div><div style="text-align: left;"><span style="background-color: initial;">Status = "Released"</span><br /></div><div style="text-align: left;"><span style="background-color: initial;"><br /></span></div><div style="text-align: left;"><span style="background-color: initial;">2.3. IF NoDataFound</span></div><div style="text-align: left;"><b><span style="background-color: initial;"><span style=""></span>  Return "NoSimulationResultsReleased"</span><br /></b></div><div style="text-align: left;"><span style="background-color: initial;"><br /></span></div><div style="text-align: left;"><span style="background-color: initial;">2.4. Avoid sending the same SimResult twice</span></div><div style="text-align: left;"><span style="background-color: initial;">IF selected</span><span style="background-color: initial;">SimResultID = inputSimResultID THEN</span></div><div style="text-align: left;"><span style="background-color: initial;"><b><span style=""></span>  Return "NoNewerSimulationAvailable"<br /></b></span></div><div style="text-align: left;"><span style="background-color: initial;"><br /></span></div><div style="text-align: left;"><span style="background-color: initial;">2.5. Filter Shipments of the selcted SimResult to Requestors BPNS</span></div><span style="text-align: left;">--&gt; Shipment.</span>DestinationBPNS = "A"<br /><br /><div style="text-align: left;">2.6. IF NoDataFound</div><div style="text-align: left;"><b><span style=""></span><span style=""><span style=""></span></span>  Return "NoShipmentsPlanned"</b><br /></div><div style="text-align: left;"><span style=""> </span>ELSE<br /></div><div style="text-align: left;"><span style=""> </span><span style=""> </span>- Temporary persist the data Request. The Simulation Result will be sent  <span style=""> </span><span style=""> </span>with a separate call<br /><span style=""> </span><span style=""> </span>- <b>Return OK</b></div><div style="text-align: left;"><br /></div><div style="text-align: left;">3 Call receiveLatestSimulationResult (</div><div style="text-align: left;"><span style="white-space: pre;"> </span>RequestID,</div><div style="text-align: left;"><span style="white-space: pre;"> </span>latest released simulation result)</div><div style="text-align: left;"><br /></div></div></div></div></foreignObject><text x="1193" y="51" fill="#333333" font-family="Helvetica" font-size="14px" text-anchor="middle">OSim Manager...</text></switch></g><path d="M 905 443 L 411.37 440.04" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 406.12 440.01 L 413.14 436.55 L 411.37 440.04 L 413.1 443.55 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="450" cy="87.5" rx="25" ry="22.5" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 88px; margin-left: 426px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">1</div></div></div></foreignObject><text x="450" y="91" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">1</text></switch></g><ellipse cx="605" cy="475.5" rx="25" ry="22.5" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 476px; margin-left: 581px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">2</div></div></div></foreignObject><text x="605" y="479" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">2</text></switch></g><rect x="640" y="521.5" width="255" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 253px; height: 1px; padding-top: 537px; margin-left: 642px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="">Return Value:<br />{</div><span style="white-space: pre;"> </span>UnknownBPNS,<br /><span style="white-space: pre;"> </span>NoSimulationResultsReleased, <br /><span style=""> </span><span style="white-space: pre;"> </span>NoNewerSimulationAvailable,<br /><span style=""> </span><span style="white-space: pre;"> </span>NoShipmentsPlanned,<br /><span style="white-space: pre;"> </span>OK<br /> <span style="background-color: initial;">}</span></div></div></div></foreignObject><text x="642" y="541" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">Return Value:...</text></switch></g><path d="M 905 613 L 411.37 610.04" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 406.12 610.01 L 413.14 606.55 L 411.37 610.04 L 413.1 613.55 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="451" cy="645.5" rx="25" ry="22.5" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 646px; margin-left: 427px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">3</div></div></div></foreignObject><text x="451" y="649" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">3</text></switch></g><rect x="496" y="638" width="312" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 310px; height: 1px; padding-top: 653px; margin-left: 497px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="text-align: left;"><span style="background-color: initial;">receiveLatestSimulationResult(</span></div><div style="text-align: left;"><span style="background-color: initial;"><span style="white-space: pre;"> </span>RequestID,</span></div><div style="text-align: left;"><span style="background-color: initial;"><span style="white-space: pre;"> </span>MaterialflowSimulationResult</span><span style="background-color: initial;">)</span></div><div style="text-align: left;"></div><div style="text-align: left;"><span style="background-color: initial;"><br /></span></div><div style="text-align: left;"></div></div></div></div></foreignObject><text x="652" y="657" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">receiveLatestSimulationResult(...</text></switch></g><path d="M 405 700 L 898.63 702.96" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 903.88 702.99 L 896.86 706.45 L 898.63 702.96 L 896.9 699.45 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="648" y="745" width="370" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 368px; height: 1px; padding-top: 760px; margin-left: 650px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="">Return Value:<br />{</div><span style="white-space: pre;"> </span>OK,<br /><span style="white-space: pre;"> </span>NOK<br /> <span style="background-color: initial;">}</span></div></div></div></foreignObject><text x="650" y="764" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px">Return Value:...</text></switch></g><ellipse cx="604" cy="732.5" rx="25" ry="22.5" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 733px; margin-left: 580px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">4</div></div></div></foreignObject><text x="604" y="736" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">4</text></switch></g><rect x="22.5" y="0" width="312" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 310px; height: 1px; padding-top: 15px; margin-left: 24px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="text-align: left;"><i><b><u>Data consumer</u></b></i></div><div style="text-align: left;"></div></div></div></div></foreignObject><text x="179" y="19" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Data consumer&#xa;</text></switch></g><rect x="1033" y="0" width="312" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 310px; height: 1px; padding-top: 15px; margin-left: 1034px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="text-align: left;"><i><b><u>Data provider</u></b></i></div><div style="text-align: left;"></div></div></div></div></foreignObject><text x="1189" y="19" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="14px" text-anchor="middle">Data provider&#xa;</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>